\section{The Control Higher-Order Map}

\subsection{Functorial Boxes}

%The operation of turning a non-dimension-decreasing matrix to its controlled diagram can be made into a lax monoidal functor. Let $\mathbf{Hilb_{\leq}}$ be the subcategory of Hilbert spaces and non-dimension-descreasing linear transformations. Adding an additional horizontal wire to facilitate composition, $F: \mathbf{Hilb_{\leq}} \to \mathbf{Hilb}$ is defined as follows for arbitrary  $D \in Hom_{Hilb_{\leq}}(V, W)$.
We define the superator $\Control$ which takes a square matrix $M: V \to V$ to its controlled square diagram $V \otimes \mathbb{C}^2 \to V \otimes \mathbb{C}^2$. In the functorial box notation of \cite{mellies2006functorial}, we write:
\begin{equation}
    \tikzfig{tikz/func/F_def_box}
\end{equation}

$\Control$ inherits two important algebraic properties.


\begin{prop}\label{prop:ctrl_comp_h}
\begin{equation*}
	\tikzfig{tikz/func/ctrl_comp_hdef}
\end{equation*}\end{prop}


\begin{prop}\label{prop:ctrl_comp_v}
\begin{equation*}
	\tikzfig{tikz/func/ctrl_comp_vdef}
\end{equation*}
\end{prop}

\subsection{Multiple Control}

This section proves that controlling a controlled diagram gives the AND of the control wires. First we show how to represent the binary AND gate in the ZXW-calculus, and check it in Appendix~\ref*{sec:appiso}. This construction is by deMorgan's law of a diagram for binary OR from \Cref{prop:vec_pnf}.
\begin{lemma}\label{lemma:and}
    \begin{equation*}
        \tikzfig{tikz/func/and_def}
    \end{equation*}
\end{lemma}

Multiple applications of $\Control$ ANDs the controls, proved in Appendix~\ref*{sec:appiso}.
\begin{prop}\label{prop:FF}
    \begin{equation*}
        \tikzfig{tikz/func/FF_statement}
    \end{equation*}
\end{prop}

%Since AND is a monoid, it is reasonable to expect that multiple control induces a monad. Unfortunately, this does not appear to go through. Although AND does define a natural transformation (in the relevant category), defining the unit of the monad necessitates defining $\Control$ of non-square matrices, which breaks functoriality. Nevertheless we prove that AND is a natural transformation.

\begin{prop}
    $\mu: \Control ^2 \to \Control$ is a natural transformation with components $\mu_V: \Control^2 V \to \Control V$ defined as follows:
    \begin{equation*}
        \tikzfig{tikz/func/mu_def}
    \end{equation*}
\end{prop}

\begin{proof}
    \begin{equation}\label{eq:munat}
        \tikzfig{tikz/func/mu_nat}
    \end{equation}
    due to the $Z-H$ bialgebra rule in the ZH calculus, as the multiply box is an H gate after an H-box.
\end{proof}
\begin{corollary}
    By the $Z-X$ and $Z-W$ bialgebra rules as well as the Z spider fusion rule, in addition to the multiply box, \Cref{eq:munat} holds for all other 2-input, 1-output generators: Z, X, and W.
\end{corollary}

%\begin{prop}
%    $(F, \mu, \eta)$ defined a monad on $\mathbf{Hilb_j}$
%\end{prop}
%\begin{proof}
%    Firstly, $\mu$ is a natural transformation since for any $M: V \to V$:
%Similary, $\eta$ is a natural transformation since for any $M: V \to V$:
%    \begin{equation*}
%        \tikzfig{tikz/func/eta_nat}
%    \end{equation*}
% For the unitality coherence condition:
%    \begin{equation*}
%        \tikzfig{tikz/func/coh1}
%    \end{equation*}
%\end{proof}